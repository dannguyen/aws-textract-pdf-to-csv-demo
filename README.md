# How good is AWS Textract at extracting data tables from real-world PDFs

Testing AWS Textract's ability to extract data tables from real-world data PDFs (i.e. pdf-to-csv)

I originally intended to do a quick writeup of AWS just-released Textract cloud service and thought I could write about how it did on a particular FBI PDF report [in just a gist](https://gist.github.com/dannguyen/3673e67a495c172abbd3bb8a9a6e199a). But I soon realize the number of files involved – e.g. screenshots, example PDFs, CSV output from multiple software solutions besides Textract – was really impractical for a Github gist, and much more manageable as a Github repo. So here you are.

**This is a work in progress** (and likely to be abandoned because I hate this kind of work when it's actual work, nevermind doing it out of "fun" and curiosity). 


Further down in this README,[ you'll see the raw data and my observations](#bookmark-intro-to-aws) on how Textract performed on the sample image file that Amazon provides (tl;dr: surprise surprise, it does a perfect job!). So far, I also have a [partial writeup and data on how Textract handles a PDF](./examples/fbi-nics/README-fbi-nics.md) from the FBI National Instant Criminal Background Check System (tl;dr: pretty good for how complicated the PDF is; unfortunately, it also makes a few serious and unpredictable errors in transcribing various data values):

<img src="examples/fbi-nics/assets/images/fbi-nics-pdf-and-tables-csv-closeup-vertical-comparison.png" alt="fbi-nics-pdf-and-tables-csv-closeup-vertical-comparison.png">



I hope to test out Textract on some other well-known public and important PDFs:


### Example real-world PDFs (TK)

(todo)

- The [monthly reports generated by FBI National Instant Criminal Background Check System](./examples/fbi-nics/README-fbi-nics.md) (difficult)
- California WARN notices (should be easy)
- Senate financial disclosures (as much of a clusterfuck as this problem can get; see [related repo using ABBYY FineReader](https://github.com/dannguyen/abbyy-finereader-ocr-senate))



<a name="bookmark-intro-to-aws" id="bookmark-intro-to-aws"></a>

## Intro to AWS Textract



**Amazon Textract** was [announced about 6 months ago](https://news.ycombinator.com/item?id=18554122) but was made [public today (May 29)](https://finance.yahoo.com/news/aws-announces-general-availability-amazon-220000840.html). If have an AWS account, you can check out Textract's point-and-click demo, which allows you to upload an image or PDF for Textract to process with optical character recognition (OCR) and data table extraction. Obviously, the OCR ability is going to be a huge feature for many folks dealing with trying to extract data from scanned documents. However, Textract's capabilities in **data table extraction** is the focus of this gist)

You can access the demo via the AWS console at this URL: https://console.aws.amazon.com/textract/home#/demo


### How Textract performs on its own sample document and data table


The Textract demo conveniently [provides an image file](https://s3.us-east-1.amazonaws.com/textract-public-assets-us-east-1/default_document.png) – in PNG format – of a sample "Employment Application" document that you might create in a word processor and later save as a PDF. The sample doc also contains a simple data table titled, **"Previous Employment History"**.

I've saved a copy of the sample PNG to this repo:

<p style="text-align: center; margin: auto;">
    <a href="examples/default-sample-document/default_document.png">
    <img src="examples/default-sample-document/default_document.png" alt="">
</a>
</p>

It's worth emphasizing that while this sample *could* be a document PDF – i.e. a PDF containing actual text, rather than scanned images of a document – the demo seems to be operating on the PNG screenshot of the original PDF, which would require accurate OCR processing *before* attempting data table extraction. In other words, this demo shows the full purported value of AWS Textract for folks who hope for Amazon's solution to extracting data from **scanned** documents.

But given that this sample document PNG is supplied by Amazon, it shouldn't be a surprise Textract appears to OCR the image text *and* extract the data perfectly. First, here's a screenshot of what the demo interface looks like, including how it allows the user to preview the tabular extraction:

<a href="https://console.aws.amazon.com/textract/home#/demo">
    <img src="examples/default-sample-document/assets/images/textract-default-demo.png" alt="">
</a>

And here's what the extracted tabular data (i.e. [tables.csv](examples/default-sample-document/results/textract-results-default_document-zip/tables.csv)) looks like when opened in Excel:

<img src="examples/default-sample-document/assets/images/default_document-tables-csv-in-excel.png" alt="default_document-tables-csv-in-excel.png">

Basically, perfect!


TODO: More explanatory stuff and observations.


## The data files created by the Textract API

For your convenience, this repo contains the zip file that the Textract demo supplies as a download, and the individual data files extracted from that zip:

- [textract-results-default_document.zip](examples/default-sample-document/results/textract-results-default_document.zip): the zip file that the Textract demo serves as a download. In the zip file are 4 data files:
     - [apiResponse.json](examples/default-sample-document/results/textract-results-default_document-zip/apiResponse.json)
     - [keyValues.csv](examples/default-sample-document/results/textract-results-default_document-zip/keyValues.csv) (note: this file is empty)
     - [rawText.txt](examples/default-sample-document/results/textract-results-default_document-zip/rawText.txt)
     - [tables.csv](examples/default-sample-document/results/textract-results-default_document-zip/tables.csv)



